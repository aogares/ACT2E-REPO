<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
</head>
<body>
    <form method="post" id="frmContact">
      
        <button type="submit" name="submit">Submit</button>
    </form>

    <table id="mytable" class="table table-stripe">
        
    </table>
</body>
</html>

<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js";
  import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-database.js";
   
  // Paste the code from Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyDYSBmnmZ0oMhffCKPtuvw_S246bmyzjh0",
    authDomain: "crud-operation-21542.firebaseapp.com",
    databaseURL: "https://crud-operation-21542-default-rtdb.firebaseio.com",
    projectId: "crud-operation-21542",
    storageBucket: "crud-operation-21542.appspot.com",
    messagingSenderId: "945022057503",
    appId: "1:945022057503:web:3ead001a1efbc3ff81e92a"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
   
  // Get a reference to the database service
  const db = getDatabase(app);
   
  document.getElementById('frmContact').addEventListener('submit', function(e) {
      e.preventDefault();
      
     // initialise database
        const db = getDatabase();

        const tasksRef = ref(db, "users");

        get(tasksRef)
        .then((snapshot) => {
            //const data = snapshot.val();
            //console.log(data);

            
            var content = '';
            snapshot.forEach(function(data){
                var val = data.val();
                content +='<tr>';
                content += '<td>' + val.name + '</td>';
                content += '<td>' + val.email + '</td>';
                content += '<td>' + val.message + '</td>';
                content += '<td>' + val.subject + '</td>';
                content += '</tr>';
            });
            $('#mytable').append(content);
            

        })
        .catch((err) => {
            console.error(err);
        });
        
    });
  </script>
